{extend name="common/base" /}
{block name="header"}
<link rel="stylesheet" href="/static/backend/css/font.css">
<link rel="stylesheet" href="/static/backend/css/xadmin.css">
{/block}
{block name="content"}
<style type="text/css">
    .tip-layer{position: relative;}
    .tip{
        position: absolute;
        z-index: 10;
        top: -25px;
        left: 10px;
        background-color: #393D49;
        color: #fff;
        border-radius: 5px;
        padding: 4px 5px;
        white-space: nowrap;
        display: none;    
    }
</style>
<div class="x-body">
    <form class="layui-form">
        {volist name="info.auth" id="vo" }
        <div class="layui-form-item">
            <label class="layui-form-label"><b>{$vo.name}：</b></label>
            <div class="layui-input-block">                
                {volist name="$vo.func" id="vo2"} 
                <span  class="tip-layer">               
                    <span class="tip">{$vo.class}->{$key}</span>                
                    <input type="checkbox" name="auth[{$vo.class}][{$key}]" title="{$vo2.name}" lay-skin="primary" value="1" {if $vo2.checked} checked="checked"{/if}>
                </span>
                {/volist}
            </div>
        </div>
        {/volist}
        <input name="id" type="hidden" value="{$info.id|default=''}">
        <div class="layui-form-item">
            <label for="L_repass" class="layui-form-label">
            </label>
            <button  class="layui-btn" lay-filter="add" lay-submit="" url="{:url('Role/save', '', '')}">
                保存
            </button>
        </div>
    </form>
</div>

<script>

layui.use(['form','layer'], function(){
    $ = layui.jquery;
    var form = layui.form
    ,layer = layui.layer;

    //监听提交
    form.on('submit(add)', function(data){        
        $.ajax({
            url: $(this).attr('url'),
            type: "post",
            data: data.field,
            success:function(res){
                if(res.status == 1){                    
                    layer.alert("保存成功", {icon: 6},function () {                        
                        var index = parent.layer.getFrameIndex(window.name);                        
                        parent.layer.close(index);
                        parent.location.reload();
                    });
                }else{
                    layer.msg(res.msg);
                }
            }
        });
        return false;
    });


});
</script>

{/block}